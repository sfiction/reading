## 1 CSS 和文档

### 元素

替换元素，如 `img`

- block-level, 块级元素, 填充父元素内容区，如 `p` 和 `div`
  - `item` 作为块元素还会生成标记符
- inline-level, 行内元素, 在文本行内生成元素框，而不会打断这行文本

通过 display 属性改变显示角色

link 元素

候选样式表

style 元素，嵌套样式表

style 属性，内联样式

## 2 选择器

- 元素选择器 `<elem>`
- 类选择器 `(.<class>)+`
- ID 选择器 `#<ID>`
- 属性选择器 `<elem>[<attribute>((|~|^|$|*)=<value>)]`
  - 例：`p[class="warning"]`
  - 列出的五种选择方式分别是完全匹配、词列表匹配、前缀、后缀、子串
  - 还有一种特殊的 `|=` 方式匹配前缀和前缀加 `-` 的串，常用于语言，如 `en-US`
- 通配选择器 `*`, 全局属性
- 子选择器, ` > ` 分隔
- 后代选择器, 空格分隔
- 兄弟选择器, ` + `，只要求父元素相同

属性值含有多个关键字一般用空格分隔，只有 font 的字体大小和行高用正斜线分隔。

选择器分组, 将声明块应用到多个选择器

CSS 定义了一些伪类，用来指示一些元素的状态，伪类选择器为 `:<pesudo-class>`
- 链接伪类：`link`, `visited`
- 其他：`focus`, `hover`, `active`
- `first-child`

伪元素 `first-letter`, `first-line`, `before`, `after`

## 3 结构和层叠

### 特殊性

选择器特殊性的四个级别：内联样式、ID、类/属性选择/伪类、元素/伪元素。根据选择器的出现次数累加，然后按字典序选择最大特殊性的规则应用到元素上。

- 通配选择器的特殊性是 `0,0,0,0`，但是与没有特殊性有微妙的区别。
- ID 选择器和指定 id 属性的属性选择器在特殊性上有区别
- 以 `!important` 结束的声明为重要声明。重要声明可以看成是比内联样式更高级别的特殊性。

### 继承

继承值没有特殊性，因此会被通配选择器指定的声明覆盖

### 层叠

按照 important、来源、特殊性、出现顺序（在后的优先）的顺序选择声明

#### 来源

- 有 important: 用户、作者
- 无 important: 作者、用户、浏览器

出现顺序对选择声明的影响决定了 CSS 中伪类选择器的出现顺序。例如一个正在点击的未访问链接会命中 link/hover/active 三个伪类，实际需要的一般是 active，因此 active 写在最后。规范中的推荐顺序为 LVHA。

## 4 值和单位

### 颜色

颜色的 rgb 表示可以是百分比也可以是 0-255 的整数。也可以是 '#' 开头的六位十六进制记法。三位十六进制记法会将一位复制为两位。

### 长度单位

- 绝对长度单位：in, cm, mm, pt, pc
- 相对长度单位
    - em, 给定元素的 font-size
    - ex, 小写 x 的高度。很多实现会直接取 em 的一半
    - px, 像素

建议在高度、宽度等使用 em，而在边框、定位等使用 px

## 5 字体

### 字体大小

7 个绝对大小

相对大小是在绝对大小等级间移动

## 6 文本属性

TODO

## 7 基本视觉格式化

### 基本框

- 内容、内边距、边框、外边距
- 内容、外边距、边框使用元素背景，外边距使用父元素背景
- 边框默认使用内容前景色

### 包含块

正常流、非替换元素、替换元素、块级元素、行内元素、根元素

### 水平格式化

水平方向的 7 个长度之和始终为元素包含块的 width

左/右外边距、width 可以设置为 auto
- 只有 1 个 auto，自动设置，使得元素框宽度为父元素的 width
- 全都是定值，根据语言方向将 margin-right/left 改为 auto
- 两个外边距都是 auto，自动设置为相等的值，效果为元素框居中
- 一个外边距和 width 为 auto，该外边距将减为 0
- 全都是 auto，两个外边距都为 0

没懂图 7-9 这个例子

左右外边距可以为负，因此其余元素的和会大于父元素的 width。

替换元素适用非替换元素的水平格式化。唯一的例外是，当 width 为 auto 时，元素的宽度为内容固有宽度。

### 垂直格式化

指定高度时，如果高度相比显示内容过小，浏览器一般会产生滚动条，具体行为取决于 overflow 属性。

正常流中，块元素 margin-top/bottom 设置为 auto 会自动置 0

包含块 height 显示声明时，可以用百分数指定 height。

块级正常流元素设置为 `height: auto`，内部只有块级子元素，默认高度会由最高的块级子元素的上边框和最低的块级子元素的下边框决定。因此子元素的外边距可能会超出。如果块级元素有上下内边距或上下边框，高度会由子元素的外边距边界计算。

相邻的垂直外边距会被合并。包含块没有设置内边距和边框时，子元素的外边距会“穿透”包含块，和包含块的外边距同时作用于下面的元素，并同样适用合并原则。









